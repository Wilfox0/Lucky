{"ast":null,"code":"import { create } from \"zustand\";\nimport { notify } from \"../components/ToastNotification\";\nexport const useCartStore = create((set, get) => ({\n  cartItems: [],\n  addToCart: product => {\n    const state = get();\n    const existing = state.cartItems.find(item => item.id === product.id);\n    if (product.quantity <= 0) {\n      notify.outOfStock(product.name, 0);\n      return;\n    }\n    if (existing) {\n      if (existing.quantity + 1 > product.quantity) {\n        notify.outOfStock(product.name, product.quantity);\n        return;\n      }\n      set({\n        cartItems: state.cartItems.map(item => item.id === product.id ? {\n          ...item,\n          quantity: item.quantity + 1\n        } : item)\n      });\n      notify.quantityUpdated(product.name, existing.quantity + 1);\n    } else {\n      set({\n        cartItems: [...state.cartItems, {\n          ...product,\n          quantity: 1\n        }]\n      });\n      notify.addToCart(product.name, 1);\n    }\n  },\n  removeFromCart: id => set(state => ({\n    cartItems: state.cartItems.filter(item => item.id !== id)\n  })),\n  clearCart: () => {\n    set({\n      cartItems: []\n    });\n    notify.cartCleared();\n  },\n  increase: id => {\n    const state = get();\n    const item = state.cartItems.find(i => i.id === id);\n    if (!item) return;\n    if (item.quantity + 1 > item.maxQuantity) {\n      notify.outOfStock(item.name, item.maxQuantity);\n      return;\n    }\n    set({\n      cartItems: state.cartItems.map(i => i.id === id ? {\n        ...i,\n        quantity: i.quantity + 1\n      } : i)\n    });\n    notify.quantityUpdated(item.name, item.quantity + 1);\n  },\n  decrease: id => set(state => ({\n    cartItems: state.cartItems.map(item => item.id === id ? {\n      ...item,\n      quantity: item.quantity - 1\n    } : item).filter(item => item.quantity > 0)\n  }))\n}));","map":{"version":3,"names":["create","notify","useCartStore","set","get","cartItems","addToCart","product","state","existing","find","item","id","quantity","outOfStock","name","map","quantityUpdated","removeFromCart","filter","clearCart","cartCleared","increase","i","maxQuantity","decrease"],"sources":["D:/الموقع/Lucky Store/src/store/cartStore.js"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { notify } from \"../components/ToastNotification\";\r\n\r\nexport const useCartStore = create((set, get) => ({\r\n  cartItems: [],\r\n  addToCart: (product) => {\r\n    const state = get();\r\n    const existing = state.cartItems.find((item) => item.id === product.id);\r\n\r\n    if (product.quantity <= 0) {\r\n      notify.outOfStock(product.name, 0);\r\n      return;\r\n    }\r\n\r\n    if (existing) {\r\n      if (existing.quantity + 1 > product.quantity) {\r\n        notify.outOfStock(product.name, product.quantity);\r\n        return;\r\n      }\r\n      set({\r\n        cartItems: state.cartItems.map((item) =>\r\n          item.id === product.id\r\n            ? { ...item, quantity: item.quantity + 1 }\r\n            : item\r\n        ),\r\n      });\r\n      notify.quantityUpdated(product.name, existing.quantity + 1);\r\n    } else {\r\n      set({\r\n        cartItems: [...state.cartItems, { ...product, quantity: 1 }],\r\n      });\r\n      notify.addToCart(product.name, 1);\r\n    }\r\n  },\r\n  removeFromCart: (id) =>\r\n    set((state) => ({\r\n      cartItems: state.cartItems.filter((item) => item.id !== id),\r\n    })),\r\n  clearCart: () => {\r\n    set({ cartItems: [] });\r\n    notify.cartCleared();\r\n  },\r\n  increase: (id) => {\r\n    const state = get();\r\n    const item = state.cartItems.find((i) => i.id === id);\r\n    if (!item) return;\r\n    if (item.quantity + 1 > item.maxQuantity) {\r\n      notify.outOfStock(item.name, item.maxQuantity);\r\n      return;\r\n    }\r\n    set({\r\n      cartItems: state.cartItems.map((i) =>\r\n        i.id === id ? { ...i, quantity: i.quantity + 1 } : i\r\n      ),\r\n    });\r\n    notify.quantityUpdated(item.name, item.quantity + 1);\r\n  },\r\n  decrease: (id) =>\r\n    set((state) => ({\r\n      cartItems: state.cartItems\r\n        .map((item) =>\r\n          item.id === id ? { ...item, quantity: item.quantity - 1 } : item\r\n        )\r\n        .filter((item) => item.quantity > 0),\r\n    })),\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}