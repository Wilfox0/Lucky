{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u0627\\u0644\\u0645\\u0648\\u0642\\u0639\\\\Lucky Store\\\\src\\\\pages\\\\admin\\\\SettingsManagement.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport supabase from \"../../utils/supabase\"; // โ ุชู ุชุนุฏูู ุงููุณุงุฑ ูุงูุงุณุชูุฑุงุฏ ุงูุตุญูุญ\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SettingsManagement = () => {\n  _s();\n  const [storeName, setStoreName] = useState(\"\");\n  const [logoUrl, setLogoUrl] = useState(\"\");\n  const [logoFile, setLogoFile] = useState(null);\n\n  // ๐ ุชุญููู ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ\n  useEffect(() => {\n    const fetchSettings = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from(\"settings\").select(\"*\").single();\n      if (!error && data) {\n        setStoreName(data.store_name || \"\");\n        setLogoUrl(data.logo_url || \"\");\n      }\n    };\n    fetchSettings();\n  }, []);\n\n  // ๐ ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ ุฅูู ุงูุชุฎุฒูู\n  const uploadLogo = async () => {\n    if (!logoFile) return null;\n    const fileName = `logo_${Date.now()}.${logoFile.name.split(\".\").pop()}`;\n    const {\n      data,\n      error\n    } = await supabase.storage.from(\"logos\").upload(fileName, logoFile);\n    if (error) {\n      alert(\"ุฎุทุฃ ูู ุฑูุน ุงูุตูุฑุฉ\");\n      return null;\n    }\n    const {\n      data: urlData\n    } = supabase.storage.from(\"logos\").getPublicUrl(fileName);\n    return urlData.publicUrl;\n  };\n\n  // ๐ ุชุญุฏูุซ ุงูุจูุงูุงุช\n  const handleSave = async () => {\n    let finalLogoUrl = logoUrl;\n    if (logoFile) {\n      const uploadedUrl = await uploadLogo();\n      if (uploadedUrl) finalLogoUrl = uploadedUrl;\n    }\n    const {\n      error\n    } = await supabase.from(\"settings\").upsert({\n      id: 1,\n      store_name: storeName,\n      logo_url: finalLogoUrl\n    });\n    if (error) {\n      alert(\"โ ุฎุทุฃ ูู ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช\");\n    } else {\n      setLogoUrl(finalLogoUrl);\n      alert(\"โ ุชู ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white shadow rounded-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"\\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A \\u0627\\u0644\\u0645\\u062A\\u062C\\u0631\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block mb-1\",\n        children: \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062A\\u062C\\u0631:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: storeName,\n        onChange: e => setStoreName(e.target.value),\n        className: \"border p-2 w-full rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block mb-1\",\n        children: \"\\u0627\\u0644\\u0644\\u0648\\u062C\\u0648 \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), logoUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logoUrl,\n        alt: \"Logo\",\n        className: \"w-20 h-20 mb-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F \\u0644\\u0648\\u062C\\u0648 \\u0628\\u0639\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: e => setLogoFile(e.target.files[0]),\n        className: \"mt-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSave,\n      className: \"bg-blue-600 text-white px-4 py-2 rounded-lg\",\n      children: \"\\uD83D\\uDCBE \\u062D\\u0641\\u0638 \\u0627\\u0644\\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(SettingsManagement, \"NnlUIoBLN3uU0VSnMUG0vZKOK8A=\");\n_c = SettingsManagement;\nexport default SettingsManagement;\nvar _c;\n$RefreshReg$(_c, \"SettingsManagement\");","map":{"version":3,"names":["React","useEffect","useState","supabase","jsxDEV","_jsxDEV","SettingsManagement","_s","storeName","setStoreName","logoUrl","setLogoUrl","logoFile","setLogoFile","fetchSettings","data","error","from","select","single","store_name","logo_url","uploadLogo","fileName","Date","now","name","split","pop","storage","upload","alert","urlData","getPublicUrl","publicUrl","handleSave","finalLogoUrl","uploadedUrl","upsert","id","className","children","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","src","alt","accept","files","onClick","_c","$RefreshReg$"],"sources":["D:/ุงููููุน/Lucky Store/src/pages/admin/SettingsManagement.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport supabase from \"../../utils/supabase\"; // โ ุชู ุชุนุฏูู ุงููุณุงุฑ ูุงูุงุณุชูุฑุงุฏ ุงูุตุญูุญ\r\n\r\nconst SettingsManagement = () => {\r\n  const [storeName, setStoreName] = useState(\"\");\r\n  const [logoUrl, setLogoUrl] = useState(\"\");\r\n  const [logoFile, setLogoFile] = useState(null);\r\n\r\n  // ๐ ุชุญููู ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ\r\n  useEffect(() => {\r\n    const fetchSettings = async () => {\r\n      const { data, error } = await supabase.from(\"settings\").select(\"*\").single();\r\n      if (!error && data) {\r\n        setStoreName(data.store_name || \"\");\r\n        setLogoUrl(data.logo_url || \"\");\r\n      }\r\n    };\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  // ๐ ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ ุฅูู ุงูุชุฎุฒูู\r\n  const uploadLogo = async () => {\r\n    if (!logoFile) return null;\r\n\r\n    const fileName = `logo_${Date.now()}.${logoFile.name.split(\".\").pop()}`;\r\n    const { data, error } = await supabase.storage\r\n      .from(\"logos\")\r\n      .upload(fileName, logoFile);\r\n\r\n    if (error) {\r\n      alert(\"ุฎุทุฃ ูู ุฑูุน ุงูุตูุฑุฉ\");\r\n      return null;\r\n    }\r\n\r\n    const { data: urlData } = supabase.storage.from(\"logos\").getPublicUrl(fileName);\r\n    return urlData.publicUrl;\r\n  };\r\n\r\n  // ๐ ุชุญุฏูุซ ุงูุจูุงูุงุช\r\n  const handleSave = async () => {\r\n    let finalLogoUrl = logoUrl;\r\n\r\n    if (logoFile) {\r\n      const uploadedUrl = await uploadLogo();\r\n      if (uploadedUrl) finalLogoUrl = uploadedUrl;\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from(\"settings\")\r\n      .upsert({ id: 1, store_name: storeName, logo_url: finalLogoUrl });\r\n\r\n    if (error) {\r\n      alert(\"โ ุฎุทุฃ ูู ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช\");\r\n    } else {\r\n      setLogoUrl(finalLogoUrl);\r\n      alert(\"โ ุชู ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white shadow rounded-xl\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ</h2>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block mb-1\">ุงุณู ุงููุชุฌุฑ:</label>\r\n        <input\r\n          type=\"text\"\r\n          value={storeName}\r\n          onChange={(e) => setStoreName(e.target.value)}\r\n          className=\"border p-2 w-full rounded\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block mb-1\">ุงูููุฌู ุงูุญุงูู:</label>\r\n        {logoUrl ? (\r\n          <img src={logoUrl} alt=\"Logo\" className=\"w-20 h-20 mb-2 rounded\" />\r\n        ) : (\r\n          <p>ูุง ููุฌุฏ ููุฌู ุจุนุฏ</p>\r\n        )}\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={(e) => setLogoFile(e.target.files[0])}\r\n          className=\"mt-2\"\r\n        />\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleSave}\r\n        className=\"bg-blue-600 text-white px-4 py-2 rounded-lg\"\r\n      >\r\n        ๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}