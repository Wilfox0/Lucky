{"ast":null,"code":"import { create } from \"zustand\";\nimport notify from \"../components/ToastNotification\"; // ✅ تم تعديل الاستيراد فقط\n\nexport const useCartStore = create((set, get) => ({\n  cartItems: [],\n  addToCart: product => {\n    const state = get();\n    const existing = state.cartItems.find(item => item.id === product.id);\n    if (product.quantity <= 0) {\n      notify.outOfStock(product.name, 0);\n      return;\n    }\n    if (existing) {\n      if (existing.quantity + 1 > product.quantity) {\n        notify.outOfStock(product.name, product.quantity);\n        return;\n      }\n      set({\n        cartItems: state.cartItems.map(item => item.id === product.id ? {\n          ...item,\n          quantity: item.quantity + 1\n        } : item)\n      });\n      notify.quantityUpdated(product.name, existing.quantity + 1);\n    } else {\n      set({\n        cartItems: [...state.cartItems, {\n          ...product,\n          quantity: 1,\n          maxQuantity: product.quantity\n        }]\n      });\n      notify.addToCart(product.name, 1);\n    }\n  },\n  removeFromCart: id => {\n    const state = get();\n    const item = state.cartItems.find(i => i.id === id);\n    if (item) notify.quantityUpdated(item.name, 0);\n    set({\n      cartItems: state.cartItems.filter(item => item.id !== id)\n    });\n  },\n  clearCart: () => {\n    set({\n      cartItems: []\n    });\n    notify.cartCleared();\n  },\n  increase: id => {\n    const state = get();\n    const item = state.cartItems.find(i => i.id === id);\n    if (!item) return;\n    if (item.quantity + 1 > item.maxQuantity) {\n      notify.outOfStock(item.name, item.maxQuantity);\n      return;\n    }\n    set({\n      cartItems: state.cartItems.map(i => i.id === id ? {\n        ...i,\n        quantity: i.quantity + 1\n      } : i)\n    });\n    notify.quantityUpdated(item.name, item.quantity + 1);\n  },\n  decrease: id => {\n    const state = get();\n    const item = state.cartItems.find(i => i.id === id);\n    if (!item) return;\n    const newQty = item.quantity - 1;\n    set({\n      cartItems: state.cartItems.map(i => i.id === id ? {\n        ...i,\n        quantity: newQty\n      } : i).filter(i => i.quantity > 0)\n    });\n    if (newQty > 0) notify.quantityUpdated(item.name, newQty);else notify.quantityUpdated(item.name, 0);\n  },\n  confirmOrder: () => {\n    set({\n      cartItems: []\n    });\n    notify.orderConfirmed();\n  }\n}));","map":{"version":3,"names":["create","notify","useCartStore","set","get","cartItems","addToCart","product","state","existing","find","item","id","quantity","outOfStock","name","map","quantityUpdated","maxQuantity","removeFromCart","i","filter","clearCart","cartCleared","increase","decrease","newQty","confirmOrder","orderConfirmed"],"sources":["D:/الموقع/Lucky Store/src/store/cartStore.js"],"sourcesContent":["import { create } from \"zustand\";\r\nimport notify from \"../components/ToastNotification\"; // ✅ تم تعديل الاستيراد فقط\r\n\r\nexport const useCartStore = create((set, get) => ({\r\n  cartItems: [],\r\n\r\n  addToCart: (product) => {\r\n    const state = get();\r\n    const existing = state.cartItems.find((item) => item.id === product.id);\r\n\r\n    if (product.quantity <= 0) {\r\n      notify.outOfStock(product.name, 0);\r\n      return;\r\n    }\r\n\r\n    if (existing) {\r\n      if (existing.quantity + 1 > product.quantity) {\r\n        notify.outOfStock(product.name, product.quantity);\r\n        return;\r\n      }\r\n      set({\r\n        cartItems: state.cartItems.map((item) =>\r\n          item.id === product.id\r\n            ? { ...item, quantity: item.quantity + 1 }\r\n            : item\r\n        ),\r\n      });\r\n      notify.quantityUpdated(product.name, existing.quantity + 1);\r\n    } else {\r\n      set({\r\n        cartItems: [...state.cartItems, { ...product, quantity: 1, maxQuantity: product.quantity }],\r\n      });\r\n      notify.addToCart(product.name, 1);\r\n    }\r\n  },\r\n\r\n  removeFromCart: (id) => {\r\n    const state = get();\r\n    const item = state.cartItems.find((i) => i.id === id);\r\n    if (item) notify.quantityUpdated(item.name, 0);\r\n    set({ cartItems: state.cartItems.filter((item) => item.id !== id) });\r\n  },\r\n\r\n  clearCart: () => {\r\n    set({ cartItems: [] });\r\n    notify.cartCleared();\r\n  },\r\n\r\n  increase: (id) => {\r\n    const state = get();\r\n    const item = state.cartItems.find((i) => i.id === id);\r\n    if (!item) return;\r\n    if (item.quantity + 1 > item.maxQuantity) {\r\n      notify.outOfStock(item.name, item.maxQuantity);\r\n      return;\r\n    }\r\n    set({\r\n      cartItems: state.cartItems.map((i) =>\r\n        i.id === id ? { ...i, quantity: i.quantity + 1 } : i\r\n      ),\r\n    });\r\n    notify.quantityUpdated(item.name, item.quantity + 1);\r\n  },\r\n\r\n  decrease: (id) => {\r\n    const state = get();\r\n    const item = state.cartItems.find((i) => i.id === id);\r\n    if (!item) return;\r\n    const newQty = item.quantity - 1;\r\n    set({\r\n      cartItems: state.cartItems\r\n        .map((i) => (i.id === id ? { ...i, quantity: newQty } : i))\r\n        .filter((i) => i.quantity > 0),\r\n    });\r\n    if (newQty > 0) notify.quantityUpdated(item.name, newQty);\r\n    else notify.quantityUpdated(item.name, 0);\r\n  },\r\n\r\n  confirmOrder: () => {\r\n    set({ cartItems: [] });\r\n    notify.orderConfirmed();\r\n  },\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}